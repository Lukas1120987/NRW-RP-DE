<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Leitfaden Editor – NRW RP DE</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <style>
    :root {
      --primary: #5865F2;
      --primary-dark: #4752C4;
      --accent: #7289da;
      --background: #0a0e1a;
      --background-alt: #0f1219;
      --card-bg: #131829;
      --text: #f0f0f0;
      --text-light: #b8bcc8;
      --border: #1e2335;
      --transition: all 0.3s cubic-bezier(0.4,0,0.2,1);
    }

    body {
      font-family: "Inter", sans-serif;
      background: var(--background);
      color: var(--text);
      margin:0;
      padding:0;
      display:flex;
      flex-direction:column;
      min-height:100vh;
    }

    header {
      background: var(--background-alt);
      padding: 1rem 2rem;
      display:flex;
      align-items:center;
      justify-content:space-between;
      border-bottom:1px solid var(--border);
    }

    header img { height:50px; }

    main {
      flex:1;
      padding:2rem;
      max-width:1200px;
      margin:0 auto;
      width:100%;
    }

    #editor-container {
      height: 350px;
      background: var(--card-bg);
      border:1px solid var(--border);
      border-radius:12px;
      margin-bottom:1rem;
    }

    .hero-actions {
      display:flex;
      gap:1rem;
      margin-bottom:2rem;
      flex-wrap:wrap;
    }

    .btn-hero, .btn-ghost {
      padding: 0.75rem 1.5rem;
      border-radius: 10px;
      font-weight:600;
      cursor:pointer;
      border:none;
      font-size:1rem;
      transition: var(--transition);
      text-align:center;
      text-decoration:none;
      display:inline-block;
    }

    .btn-hero {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color:#fff;
      box-shadow: 0 4px 12px rgba(88,101,242,0.3);
    }
    .btn-hero:hover {
      transform:translateY(-2px);
      box-shadow: 0 8px 20px rgba(88,101,242,0.4);
    }

    .btn-ghost {
      background:transparent;
      color: var(--primary);
      border: 2px solid var(--primary);
    }
    .btn-ghost:hover {
      background: rgba(88,101,242,0.1);
    }

    .preview {
      background: var(--card-bg);
      border:1px solid var(--border);
      border-radius:12px;
      padding:1rem;
      min-height:200px;
      margin-bottom:2rem;
    }

    input, textarea {
      width:100%;
      padding:0.75rem;
      border-radius:8px;
      border:1px solid var(--border);
      margin-bottom:1rem;
      background: var(--card-bg);
      color: var(--text);
    }

    footer {
      background: var(--background-alt);
      border-top:1px solid var(--border);
      padding:1.5rem 2rem;
      text-align:center;
      font-size:0.9rem;
      color: var(--text-light);
    }

    h1,h2 { text-align:center; margin-bottom:1rem; }
  </style>
</head>
<body>

<header>
  <img src="bilder/logo.png" alt="NRW RP DE Logo">
  <a href="https://discord.gg/rGXZg3XV5X" class="btn-hero">Discord beitreten</a>
</header>

<main>
  <h1>Leitfaden Editor</h1>
  <p style="text-align:center; margin-bottom:2rem;">Erstelle einen stilvollen Leitfaden mit Cover, Titel und exportiere ihn als PDF.</p>

  <!-- Layout Inputs -->
  <input type="text" id="title" placeholder="Titel des Leitfadens">
  <input type="text" id="subtitle" placeholder="Untertitel / Beschreibung">
  <input type="url" id="cover" placeholder="Cover-Bild URL (optional)" value="https://github.com/Lukas1120987/NRW-RP-DE/blob/main/bilder/logo.png?raw=true">


  <div id="editor-container"></div>

  <div class="hero-actions">
    <button id="export-pdf" class="btn-hero">Als PDF exportieren</button>
    <button id="clear-editor" class="btn-ghost">Editor leeren</button>
  </div>

  <h2>Vorschau</h2>
  <div class="preview" id="preview"></div>
</main>

<footer>
  &copy; 2025 NRW RP DE – Alle Rechte vorbehalten.
</footer>

<script>
  // Quill Editor
  const quill = new Quill('#editor-container', {
    theme: 'snow',
    placeholder: 'Hier Leitfaden schreiben...',
    modules: {
      toolbar: [
        [{ 'header': [1, 2, 3, false] }],
        ['bold', 'italic', 'underline'],
        [{ 'list': 'ordered'}, { 'list': 'bullet' }],
        ['link', 'image'],
        ['clean']
      ]
    }
  });

  const preview = document.getElementById('preview');

  // Live Preview
  quill.on('text-change', updatePreview);
  document.getElementById('title').addEventListener('input', updatePreview);
  document.getElementById('subtitle').addEventListener('input', updatePreview);
  document.getElementById('cover').addEventListener('input', updatePreview);

  function updatePreview() {
    const title = document.getElementById('title').value;
    const subtitle = document.getElementById('subtitle').value;
    const cover = document.getElementById('cover').value;

    let html = '';
    if(cover) html += `<img src="${cover}" style="width:100%; border-radius:12px; margin-bottom:1rem;">`;
    if(title) html += `<h1 style="text-align:center; margin-bottom:0.5rem;">${title}</h1>`;
    if(subtitle) html += `<h3 style="text-align:center; margin-bottom:1rem; color:#b8bcc8;">${subtitle}</h3>`;
    html += quill.root.innerHTML;

    preview.innerHTML = html;
  }

// PDF Export
document.getElementById('export-pdf').addEventListener('click', () => {
  const title = document.getElementById('title').value || '';
  const subtitle = document.getElementById('subtitle').value || '';
  const cover = document.getElementById('cover').value || '';
  const content = quill.root.innerHTML;

  const container = document.createElement('div');
  container.style.padding = '2rem';
  container.style.fontFamily = 'Inter, Arial, sans-serif';
  container.style.background = '#0a0e1a'; // Dark Mode Hintergrund
  container.style.color = '#f0f0f0'; // Hellgrauer Text
  container.style.borderRadius = '12px';
  container.style.lineHeight = '1.5';

  let html = `<div style="text-align:center; margin-bottom:1rem;">
                <img src="bilder/logo.png" style="height:60px; margin-bottom:1rem; border-radius:8px;">
              </div>`;
  if (cover) html += `<img src="${cover}" style="width:100%; border-radius:12px; margin-bottom:1rem;">`;
  if (title) html += `<h1 style="text-align:center; margin-bottom:0.5rem; color:#fff;">${title}</h1>`;
  if (subtitle) html += `<h3 style="text-align:center; margin-bottom:1rem; color:#b8bcc8;">${subtitle}</h3>`;
  html += content;

  container.innerHTML = html;

  html2pdf().set({
    margin: 10,
    filename: `${title || 'Leitfaden'}.pdf`,
    html2canvas: { scale: 2, backgroundColor: null }, // transparent für Dark Mode
    jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
  }).from(container).save();
});


  // Editor leeren
  document.getElementById('clear-editor').addEventListener('click', () => {
    quill.setText('');
    document.getElementById('title').value = '';
    document.getElementById('subtitle').value = '';
    document.getElementById('cover').value = '';
    updatePreview();
  });
</script>

</body>
</html>
